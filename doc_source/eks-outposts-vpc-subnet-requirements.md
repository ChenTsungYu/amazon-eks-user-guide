# Amazon EKS local cluster VPC and subnet requirements and considerations<a name="eks-outposts-vpc-subnet-requirements"></a>

When you create a local cluster, you specify a VPC and at least one private subnet that runs on Outposts\. This topic provides an overview of the VPC and subnets requirements and considerations for your local cluster\.

## VPC requirements and considerations<a name="outposts-vpc-requirements"></a>

When you create a local cluster, the VPC that you specify must meet the following requirements and considerations:
+ Make sure that the VPC has enough IP addresses for the local cluster, any nodes, and other Kubernetes resources that you want to create\. If the VPC that you want to use doesn't have enough IP addresses, increase the number of available IP addresses\. You can do this by [associating additional Classless Inter\-Domain Routing \(CIDR\) blocks](https://docs.aws.amazon.com/vpc/latest/userguide/working-with-vpcs.html#add-ipv4-cidr) with your VPC\. You can associate private \(RFC 1918\) and public \(non\-RFC 1918\) CIDR blocks to your VPC either before or after you create your cluster\. It can take a cluster up to 5 hours for a CIDR block that you associated with a VPC to be recognized\.
+ The VPC can't have assigned IP prefixes or IPv6 CIDR blocks\. Because of these constraints, the information that's covered in [Increase the amount of available IP addresses for your Amazon EC2 nodes](cni-increase-ip-addresses.md) and [Tutorial: Assigning `IPv6` addresses to pods and services](cni-ipv6.md) isn't applicable to your VPC\.
+ The VPC has a DNS hostname and DNS resolution enabled\. Without these features, the local cluster fails to create, and you need to enable the features and recreate your cluster\. For more information, see [DNS attributes for your VPC](https://docs.aws.amazon.com/vpc/latest/userguide/vpc-dns.html) in the Amazon VPC User Guide\.
+ To access your local cluster over your local network, the VPC must be associated with your Outpost’s local gateway route table\. For more information, see [VPC associations](https://docs.aws.amazon.com/outposts/latest/userguide/outposts-local-gateways.html#vpc-associations) in the AWS Outposts User Guide\.

## Subnet requirements and considerations<a name="outposts-subnet-requirements"></a>

When you create the cluster, specify at least one private subnet\. If you specify more than one subnet, the Kubernetes control plane instances are evenly distributed across the subnets\. If more than one subnet is specified, the subnets must exist on the same Outpost\. Moreover, the subnets must also have proper routes and security group permissions to communicate with each other\. When you create a local cluster, the subnets that you specify must meet the following requirements:
+ The subnets are all on the same logical Outpost\.
+ The subnets together have at least three available IP addresses for the Kubernetes control plane instances\. If three subnets are specified, each subnet must have at least one available IP address\. If two subnets are specified, each subnet must have at least two available IP addresses\. If one subnet is specified, the subnet must have at least three available IP addresses\. 
+ The subnets have an associated route table that has a route to a [NAT gateway](https://docs.aws.amazon.com/vpc/latest/userguide/vpc-nat-gateway.html) that runs in a public subnet in the Outpost’s parent Availability Zone\. The public subnet must have a route to an [internet gateway](https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Internet_Gateway.html)\. This route enables outbound internet access and prevents unsolicited inbound connections from the internet to instances on the Outpost\.
+ The subnets have a route to the Outpost rack’s [local gateway](https://docs.aws.amazon.com/outposts/latest/userguide/outposts-local-gateways.html) to access the Kubernetes API server over your local network\. If the subnets don't have a route to the Outpost rack’s local gateway, you must communicate with your Kubernetes API server from within the VPC\.
+ The subnets must use IP address\-based naming\. Amazon EC2 [resource\-based naming](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-naming.html#instance-naming-rbn) isn't supported by Amazon EKS\.