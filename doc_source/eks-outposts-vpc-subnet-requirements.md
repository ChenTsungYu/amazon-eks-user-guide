# Amazon EKS local cluster VPC and subnet requirements and considerations<a name="eks-outposts-vpc-subnet-requirements"></a>

When you create a local cluster, you specify a VPC and at least one private subnet that runs on Outposts\. This topic provides an overview of the VPC and subnets requirements and considerations that you use with your local cluster\. 

## VPC requirements and considerations<a name="outposts-vpc-requirements"></a>

When you create a local cluster, the VPC that you specify must meet the following requirements and considerations:
+ Have a sufficient number of IP addresses available for the local cluster, any nodes, and other Kubernetes resources that you want to create\. If the VPC that you want to use doesn't have a sufficient number of IP addresses, try to increase the number of available IP addresses\. You can do this by [associating additional Classless Inter\-Domain Routing \(CIDR\) blocks](https://docs.aws.amazon.com/vpc/latest/userguide/working-with-vpcs.html#add-ipv4-cidr) with your VPC\. You can associate private \(RFC 1918\) and public \(non\-RFC 1918\) CIDR blocks to your VPC either before or after you create your cluster\. It can take a cluster up to five hours for a CIDR block that you associated with a VPC to be recognized\.
+ Can't have IP prefixes assigned or IPv6 CIDR blocks\. Due to these constraints, the information in [Increase the amount of available IP addresses for your Amazon EC2 nodes](cni-increase-ip-addresses.md) and [Tutorial: Assigning `IPv6` addresses to pods and services](cni-ipv6.md) isn't applicable\.
+ Have DNS hostname and DNS resolution enabled\. Without these features, local cluster creation fails and you'll need to enable the features and recreate your cluster\. For more information, see [DNS attributes for your VPC](https://docs.aws.amazon.com/vpc/latest/userguide/vpc-dns.html) in the Amazon VPC User Guide\.
+ To access your local cluster over your local network, your VPC must be associated with your Outpost’s local gateway route table\. For more information, see [VPC associations](https://docs.aws.amazon.com/outposts/latest/userguide/outposts-local-gateways.html#vpc-associations) in the AWS Outposts User Guide\.

## Subnet requirements and considerations<a name="outposts-subnet-requirements"></a>

You must specify at least one private subnet during cluster creation\. If you specify more than one subnet, the Kubernetes control plane instances are evenly distributed across the subnets\. If more than one subnet is specified, the subnets must exist on the same Outpost and have proper routes and security group permissions to communicate with each other\. The subnets that you specify when you create a local cluster must meet the following requirements:
+ Exist on the same logical Outpost\.
+ Collectively have at least three available IP addresses for the Kubernetes control plane instances\. If three subnets are specified, then each subnet must have at least one available IP address\. If two subnets are specified, then each subnet must have at least two available IP addresses\. If one subnet is specified, then the subnet must have at least three available IP addresses\. 
+ An associated route table that has a route to a [NAT gateway](https://docs.aws.amazon.com/vpc/latest/userguide/vpc-nat-gateway.html) running in a public subnet in the Outpost’s parent Availability Zone\. The public subnet must have a route to an [internet gateway](https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Internet_Gateway.html)\. This route enables outbound internet access, and prevents unsolicited inbound connections from the internet to instances on the Outpost\.
+ A route to the Outpost rack’s [local gateway](https://docs.aws.amazon.com/outposts/latest/userguide/outposts-local-gateways.html) to access the Kubernetes API server over your local network\. If the subnets don't have a route to the Outpost rack’s local gateway, then you must communicate with your Kubernetes API server from within the VPC\.
+ Use IP address\-based naming\. Amazon EC2 [resource\-based naming](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-naming.html#instance-naming-rbn) isn't supported by Amazon EKS\.