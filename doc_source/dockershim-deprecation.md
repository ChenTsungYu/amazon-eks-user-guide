# Amazon EKS has ended support for `Dockershim`<a name="dockershim-deprecation"></a>

Kubernetes no longer supports `Dockershim`\. The Kubernetes team completely removed the runtime in Kubernetes version `1.24`\. For more information, see [Kubernetes is Moving on From Dockershim: Commitments and Next Steps](https://kubernetes.io/blog/2022/01/07/kubernetes-is-moving-on-from-dockershim/) on the *Kubernetes Blog*\.

Amazon EKS also ended support for `Dockershim` starting with the Kubernetes version `1.24` launch\. Amazon EKS AMIs that are officially published have `containerd` as the only runtime starting with version `1.24`\.

There's a `kubectl` plugin you can use to see which of your Kubernetes workloads are mounting the Docker socket volume\. For more information, see [Detector for Docker Socket \(DDS\)](https://github.com/aws-containers/kubectl-detector-for-docker-socket) on GitHub\. Amazon EKS AMIs that run Kubernetes versions lower than `1.24` use Docker as the default runtime, but have a bootstrap flag option that you can use to test out your workloads on any supported cluster today with `containerd`\. For more information, see [Enable the `containerd` runtime bootstrap flag](eks-optimized-ami.md#containerd-bootstrap)\.

We will continue to publish AMIs for existing Kubernetes versions until the end of their support date\. For more information, see [Amazon EKS Kubernetes release calendar](kubernetes-versions.md#kubernetes-release-calendar)\. If you require more time to test your workloads on `containerd`, you can stay on a supported version before `1.24` and still be fully supported\. But, when you want to upgrade official Amazon EKS AMIs to version `1.24` or higher, make sure to validate that your workloads run on `containerd`\.

The `containerd` runtime provides more reliable performance and security, and it's the runtime we're standardizing on across Amazon EKS \(Fargate and Bottlerocket already use `containerd` only\)\. `containerd` helps to minimize the number of Amazon EKS AMI releases that are required to address `Dockershim` [Common Vulnerabilities and Exposures](https://cve.mitre.org/) \(CVEs\)\. As `Dockershim` already uses `containerd` internally, you might not need to make any changes\. However, there are some situations where changes might or must be required:
+ You must make changes for any application that mounts the Docker socket\. For example, building container images using a container are impacted\. Many monitoring tools also mount the Docker socket\. You may have to wait for updates or re\-deploy workloads for runtime monitoring\.
+ You might need to make changes for any application that's reliant on specific Docker settings\. For example, using `HTTPS_PROXY` can require changes\. For more information, see [https://docs.docker.com/engine/reference/commandline/dockerd/](https://docs.docker.com/engine/reference/commandline/dockerd/) in the *Docker Docs*\.
+ If you're using the Amazon ECR credential helper to pull images, you must switch to the `kubelet` image credential provider\. For more information, see [Configure a `kubelet` image credential provider](https://kubernetes.io/docs/tasks/kubelet-credential-provider/kubelet-credential-provider/) in the Kubernetes documentation\.
+ Due to the deprecation of Docker from Amazon EKS `1.24`, some flags previously supported by the [Amazon EKS bootstrap script](https://github.com/awslabs/amazon-eks-ami/blob/master/files/bootstrap.sh) are no longer supported\. Before moving to Amazon EKS `1.24` or higher, you must remove any reference to flags which are now unsupported:
  + `--container-runtime dockerd` \(`containerd` is the only supported value\)
  + `--enable-docker-bridge`
  + `--docker-config-json`